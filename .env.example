# MaratOS Configuration
# Copy this file to .env and configure your settings.

# =============================================================================
# LLM CONFIGURATION
# =============================================================================

# API keys (not needed if using kiro-cli)
# MARATOS_ANTHROPIC_API_KEY=
# MARATOS_OPENAI_API_KEY=

# Default model for LLM calls
# MARATOS_DEFAULT_MODEL=claude-sonnet-4-20250514

# =============================================================================
# MESSAGING CHANNELS
# =============================================================================

# --- Telegram ---
# Get a bot token from @BotFather
MARATOS_TELEGRAM_ENABLED=false
MARATOS_TELEGRAM_TOKEN=
MARATOS_TELEGRAM_ALLOWED_USERS=  # Comma-separated user IDs (empty = allow all)

# --- iMessage (macOS only) ---
MARATOS_IMESSAGE_ENABLED=false
MARATOS_IMESSAGE_ALLOWED_SENDERS=  # Comma-separated phone numbers or emails

# --- Webex ---
# Create a bot at https://developer.webex.com/my-apps
MARATOS_WEBEX_ENABLED=false
MARATOS_WEBEX_TOKEN=
MARATOS_WEBEX_WEBHOOK_SECRET=  # Optional, for verifying webhooks
MARATOS_WEBEX_ALLOWED_USERS=   # Comma-separated user IDs
MARATOS_WEBEX_ALLOWED_ROOMS=   # Comma-separated room IDs

# =============================================================================
# ENTERPRISE GUARDRAILS
# =============================================================================
# All guardrails settings use MARATOS_GUARDRAILS_ prefix.
# Safe defaults are applied when not configured (no config = secure mode).
# See docs/ENTERPRISE_GUARDRAILS.md for detailed documentation.

# --- Enterprise Mode Flags ---
# Enable for maximum security (recommended for production)
MARATOS_GUARDRAILS_STRICT_MODE=false      # Min limits, no shell, workspace-only
MARATOS_GUARDRAILS_READONLY_MODE=false    # No writes or deletes allowed
MARATOS_GUARDRAILS_SANDBOX_MODE=false     # Workspace-only writes for all agents

# --- Budget Limits (Prevent Runaway Agent Loops) ---
MARATOS_GUARDRAILS_MAX_TOOL_LOOPS_PER_MESSAGE=6      # 1-20, iterations per message
MARATOS_GUARDRAILS_MAX_TOOL_CALLS_PER_MESSAGE=20     # 1-100, calls per message
MARATOS_GUARDRAILS_MAX_TOOL_CALLS_PER_SESSION=100    # 1-1000, calls per session
MARATOS_GUARDRAILS_MAX_SPAWNED_TASKS_PER_RUN=10      # 0-50, subagent spawns
MARATOS_GUARDRAILS_MAX_NESTED_SPAWN_DEPTH=3          # 1-10, spawn depth
MARATOS_GUARDRAILS_MAX_SHELL_TIME_SECONDS=120        # 1-600, seconds per command
MARATOS_GUARDRAILS_MAX_SHELL_CALLS_PER_MESSAGE=10    # 0-50, shell calls per message
MARATOS_GUARDRAILS_MAX_TOTAL_SHELL_TIME_PER_SESSION=600  # 60-3600, total shell time
MARATOS_GUARDRAILS_MAX_OUTPUT_SIZE_BYTES=1000000     # 10KB-10MB, output per tool

# --- Diff-First Mode (Approval Required Before Execution) ---
MARATOS_GUARDRAILS_DIFF_FIRST_ENABLED=false          # Enable diff-first globally
MARATOS_GUARDRAILS_DIFF_FIRST_REQUIRE_WRITES=true    # Approval for file writes
MARATOS_GUARDRAILS_DIFF_FIRST_REQUIRE_DELETES=true   # Approval for deletes
MARATOS_GUARDRAILS_DIFF_FIRST_REQUIRE_SHELL=false    # Approval for shell commands
MARATOS_GUARDRAILS_DIFF_FIRST_TIMEOUT_SECONDS=300    # 30-3600, approval timeout
# Protected file patterns (comma-separated, * wildcards supported)
MARATOS_GUARDRAILS_DIFF_FIRST_PROTECTED_PATTERNS=*.py,*.js,*.ts,*.yaml,*.yml,*.json,Dockerfile*,*.sql

# --- Audit Retention (Log Storage & Cleanup) ---
MARATOS_GUARDRAILS_AUDIT_RETENTION_DAYS=90           # 1-365, general audit logs
MARATOS_GUARDRAILS_AUDIT_TOOL_RETENTION_DAYS=60      # 1-365, tool audit logs
MARATOS_GUARDRAILS_AUDIT_LLM_RETENTION_DAYS=30       # 1-365, LLM exchange logs
MARATOS_GUARDRAILS_AUDIT_FILE_RETENTION_DAYS=90      # 1-365, file change logs
MARATOS_GUARDRAILS_AUDIT_BUDGET_RETENTION_DAYS=30    # 1-365, budget logs

# --- Audit Size Limits (Payload Truncation) ---
MARATOS_GUARDRAILS_AUDIT_MAX_DIFF_SIZE=50000         # 1KB-1MB, max diff size
MARATOS_GUARDRAILS_AUDIT_MAX_ERROR_SIZE=10000        # 500B-100KB, max error size
MARATOS_GUARDRAILS_AUDIT_MAX_CONTENT_SIZE=5000       # 500B-100KB, max content size
MARATOS_GUARDRAILS_AUDIT_MAX_PARAMS_SIZE=10000       # 500B-100KB, max params size

# --- Audit Compression & Hashing ---
MARATOS_GUARDRAILS_AUDIT_COMPRESS_DIFFS=true         # Enable gzip for large diffs
MARATOS_GUARDRAILS_AUDIT_COMPRESSION_THRESHOLD=1000  # 100-50000, compress above
MARATOS_GUARDRAILS_AUDIT_HASH_ALGORITHM=sha256       # sha256 or sha512
MARATOS_GUARDRAILS_AUDIT_PRESERVE_HASH_ON_TRUNCATE=true  # Keep original hash

# --- Agent Tool Allowlists (Optional Overrides) ---
# Leave empty to use defaults. Comma-separated tool names.
# Available tools: routing, filesystem, shell, web_search, web_fetch, kiro, sessions, canvas
# MARATOS_GUARDRAILS_MO_ALLOWED_TOOLS=routing,filesystem,shell,web_search,web_fetch,kiro,sessions,canvas
# MARATOS_GUARDRAILS_ARCHITECT_ALLOWED_TOOLS=filesystem,shell,kiro
# MARATOS_GUARDRAILS_CODER_ALLOWED_TOOLS=filesystem,shell,kiro
# MARATOS_GUARDRAILS_REVIEWER_ALLOWED_TOOLS=filesystem,shell,kiro
# MARATOS_GUARDRAILS_TESTER_ALLOWED_TOOLS=filesystem,shell,kiro
# MARATOS_GUARDRAILS_DOCS_ALLOWED_TOOLS=filesystem,shell,kiro
# MARATOS_GUARDRAILS_DEVOPS_ALLOWED_TOOLS=filesystem,shell,kiro

# =============================================================================
# GIT SETTINGS
# =============================================================================

MARATOS_GIT_AUTO_COMMIT=true
MARATOS_GIT_PUSH_TO_REMOTE=false
MARATOS_GIT_CREATE_PR=false
MARATOS_GIT_DEFAULT_BRANCH=main
MARATOS_GIT_COMMIT_PREFIX=
MARATOS_GIT_REMOTE_NAME=origin

# =============================================================================
# GITLAB INTEGRATION
# =============================================================================

# MARATOS_GITLAB_URL=https://gitlab.example.com
# MARATOS_GITLAB_TOKEN=
# MARATOS_GITLAB_NAMESPACE=group/subgroup
# MARATOS_GITLAB_SKIP_SSL=false  # Only for self-signed certs in dev
